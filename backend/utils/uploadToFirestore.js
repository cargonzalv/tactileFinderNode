const path = require("path");
const fs = require("fs");

// Creates a client

const firebase = require("../firebaseStorage");
var bucket = firebase.storage().bucket("tactiled-model");

const makeid = function() {
  var text = "";
  var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

  for (var i = 0; i < 5; i++)
    text += possible.charAt(Math.floor(Math.random() * possible.length));

  return text;
}
  async function uploadImg(url) {

    let blob = url;
    return await uploadFile(blob, makeid() + ".jpeg")
  }

  async function uploadFile(blob, fileName) {
    let contentType = "";
    const tempFilePath = path.join("../utils", fileName);
    console.log(fileName)
    contentType = "image/jpeg";
    fs.writeFileSync(tempFilePath, blob);
    console.log("data written")
    const metadata = {
      contentType: contentType,
    };
    console.log(tempFilePath)
    await bucket.upload(tempFilePath, {
      destination: "/images/" + fileName,
      metadata: metadata,
      // Once the thumbnail has been uploaded delete the local file to free up disk space.
    })
    console.log("bucket uploaded!")
    fs.unlinkSync(tempFilePath)
    return "lalala"
  }

  uploadImg("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")